/**
 * @license
 * Copyright (c) 2025 Raphyah
 * Licensed under the MIT License. See LICENSE file in the project root for details.
 */
import{ContainerSlot,Entity,ItemStack,World}from"@minecraft/server";const setDynamicBuffer=function(e,t){if("string"!=typeof e)throw new TypeError("Invalid identifier: expected a string");if(null==t)return this.setDynamicProperty(e,t);if((Array.isArray(t)||"object"==typeof t&&null!==t&&"length"in t)&&(t=new Float64Array(t)),!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new TypeError("Invalid buffer: expected one of number[] | ArrayBuffer | ArrayBufferView | undefined");const r=new Uint8Array(t.buffer||t),n=r.byteLength;if(n>20476)throw new RangeError("Invalid buffer: buffer length can not be greater than 20476 bytes");const f=new Uint16Array(Math.ceil(n/15*8)+1);let i=0,o=0,y=0;f[y++]=n;for(let e=0;e<n;e++){for(i=i<<8|r[e],o+=8;o>=15;)o-=15,f[y++]=i>>o&32767|32768}o>0&&(f[y]=i<<15-o&32767|32768),this.setDynamicProperty(e,String.fromCharCode.apply(null,f))},getDynamicBuffer=function(e){if("string"!=typeof e)throw new TypeError("Invalid identifier: expected a string");const t=this.getDynamicProperty(e);if("string"!=typeof t)return;const r=t.charCodeAt(0),n=t.length,f=new ArrayBuffer(r),i=new Uint8Array(f);let o=0,y=0,a=0;for(let e=1;e<n;e++){for(o=o<<15|32768^t.charCodeAt(e),y+=15;y>=8&&!(a>=f.byteLength);)y-=8,i[a++]=o>>y&255}return y>0&&a<r&&(i[a]=o<<8-y&255),f};"setDynamicBuffer"in ContainerSlot.prototype||Object.defineProperty(ContainerSlot.prototype,"setDynamicBuffer",{value:setDynamicBuffer}),"getDynamicBuffer"in ContainerSlot.prototype||Object.defineProperty(ContainerSlot.prototype,"getDynamicBuffer",{value:getDynamicBuffer}),"setDynamicBuffer"in Entity.prototype||Object.defineProperty(Entity.prototype,"setDynamicBuffer",{value:setDynamicBuffer}),"getDynamicBuffer"in Entity.prototype||Object.defineProperty(Entity.prototype,"getDynamicBuffer",{value:getDynamicBuffer}),"setDynamicBuffer"in ItemStack.prototype||Object.defineProperty(ItemStack.prototype,"setDynamicBuffer",{value:setDynamicBuffer}),"getDynamicBuffer"in ItemStack.prototype||Object.defineProperty(ItemStack.prototype,"getDynamicBuffer",{value:getDynamicBuffer}),"setDynamicBuffer"in World.prototype||Object.defineProperty(World.prototype,"setDynamicBuffer",{value:setDynamicBuffer}),"getDynamicBuffer"in World.prototype||Object.defineProperty(World.prototype,"getDynamicBuffer",{value:getDynamicBuffer});